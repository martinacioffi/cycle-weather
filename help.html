<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Help ‚Äî GPX Route Weather Forecast</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <link
            rel="stylesheet"
            href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
            integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
            crossorigin=""
    />
   <link rel="stylesheet" href="./css/style.css">
    <link rel="icon" href="images/favicon.ico" type="image/x-icon">
    <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>
<header>
  <div class="header-content">
    <div class="header-left">
      <a href="index.html" title="Back to home">
          <img src="images/bike.jpg" alt="Logo" class="logo">
        </a>
      <div>
        <h1>GPX Route Weather Forecast</h1>
        <div class="sub">Documentation & Input Guide</div>
      </div>
    </div>
  </div>
</header>

<div class="help-wrap">
  <main class="help-content">
    <h2 id="help-intro">How to Use the Tool</h2>
    <p>This page explains the different inputs and options available in the app.</p>

<h3 id="help-inputs">Inputs</h3>
    <h4 id="help-gpx">GPX File</h4>
    <p>Upload a GPX file containing your planned route. You can create one using <a href="https://gpx.studio/" target="_blank" class="contact-link">GPX Studio</a>,
        <a href="https://mapstogpx.com/" target="_blank" class="contact-link">Maps to GPX</a>, or export it from other mapping tools.</p>
    <h4 id="help-provider">Weather Provider</h4>
      <p>You can choose between two different weather providers:</p>
    <ul>
      <li><strong>Open‚ÄëMeteo</strong>: free, no API key required.</li>
      <li><strong>MeteoBlue</strong>: requires an API key.</li>
    </ul>
      <p>If you want to use MeteoBlue, head to <a href="https://www.meteoblue.com/weather-api" target="_blank" class="contact-link">MeteoBlue.com</a>,
          click on Register, and you'll get an API key to paste in the appropriate field.<br>If you use MeteoBlue as the weather provider, you can choose to use their pictograms (weather icons) instead of the
      default, which come from <a href="https://nrkno.github.io/yr-weather-symbols/" target="_blank" class="contact-link">Yr</a>.</p>

    <h4 id="help-time">Start Time</h4>
    <p>Set the local time when you plan to start your ride. This ensures forecasts are aligned with your actual trip.<br>The format is MM/dd/yyyy hh:mm a (for example: 09/30/2025 07:00 AM).</p>

      <h4 id="help-speed">Speed & Units</h4>
    <p>Enter your average speed on flat terrain. Choose between km/h or mph.</p>

    <h4 id="help-adj">Uphill / Downhill Adjustments</h4>
    <p>Specify how much slower you go uphill and how much faster downhill, as percentages relative to your flat speed.<br>For our calculations, we treat a road as uphill whenever the slope between two points
          exceeds 5%, and as downhill whenever the slope is steeper than ‚Äì4%.</p>

    <h4 id="help-sample">Sampling</h4>
    <p>Controls how often along the route we fetch weather data. You can set minimum spacing in distance (km) or time (minutes).
    <br>The minimum spacing for icons controls how often weather and wind icons are shown on the map and on the charts.</p>

      <h4 id="help-calls">Max API calls</h4>
    <p>Specifies the maximum number of API calls sent to the weather provider.
    If the maximum number of API calls is greater than the number of points to be sampled given the
    rules specified in the point above, points will be sampled evenly in time so that this
    parameter is respected.</p>

      <h4 id="help-breaks">Breaks</h4>
    <p>Add planned breaks by distance and duration. ETAs after each break are shifted accordingly.<br>Breaks can also be added by clicking on the map (within a radius of 500m from the route).</p>

    <h4 id="help-stats">Stats</h4>
    <p>Summary of your route: total distance, estimated duration, min/max temperature, and wet share.</p>
      <h3 id="help-map">Map</h3>
      <p>After clicking on the "Process route and fetch forecast" button, the map will show weather
      forecast along your route. By default, the map shows weather, wind and break icons and the
          route is colored according to the forecast temperature. Using the controls situated in the
      top right corner of the map, you can customize the following:</p>
          <ul>
      <li>‚òÄÔ∏è: hide/show weather markers.</li>
      <li>‚û§ : hide/show wind markers.</li>
              <li>üìå: hide/show break markers.</li>
              <li>Map controls:
                  <ul>
      <li>Base layers: choose between OpenTopoMap, OpenCycleMap and OpenStreetMap.</li>
      <li>Overlays: choose between temperature and wind. When temperature is selected,
      the route will be colored according to the actual temperature at the estimate arrival time.
      When wind is selected, the route will be colored according to the effective headwind or tailwind.</li>
    </ul>
              </li>
    </ul>

      <h3 id="help-charts">Trip forecast</h3>
      <p>Three charts show, respectively, the expected temperature, precipitation and wind along the route.
      The yellow-shaded areas represent daylight. The areas highlighted with diagonal grey striping represent breaks.
      Hovering over any point on a chart will show a tooltip both on the chart itself and on the corresponding
      point on the map.</p>

      <h4 id="help-temp-chart">Temperature chart</h4>
      <p>Shows actual and felt temperature, along with weather icons.</p>

            <h4 id="help-precip-chart">Precipitation chart</h4>
      <p>Shows precipitation and precipitation probability.</p>

            <h4 id="help-wind-chart">Wind chart</h4>
      <p>Shows wind and wind gusts, along with wind direction.</p>

            <h3 id="help-update-start-time">Update Start Time</h3>
      <p>Use this slider to see how the weather forecast would change if you selected a different start time.
      The \(+\) and \(-\) buttons to the sides of the slider let you move along the slider in steps equal to the selected
          "Min time spacing". Otherwise, you can use the buttons to the right to add and subtract, respectively, 10
      minutes, 1 hour or 1 day.</p>
      <h3 id="help-optimize">Optimize Start Time</h3>
      <p>Use this option to find the optimal starting time for your route.</p>
      <h4 id="help-optimize-start-time">Allowed start time range</h4>
      <p>Select the earliest and latest date and time within which optimal routes will be searched.</p>
      <h4 id="help-optimize-weights">Optimization weights and thresholds</h4>
      <p>Here you find the different parameters that you can optimize your route for. Each parameter has a slider which
        allows you to set the weight of that parameter in the overall optimization score. If they do not sum up to 100%,
        weights will be re-normalized. Each parameter also has a threshold value, which indicates the maximum acceptable value for that parameter.
        The optimization will try to find a route which stays as far from these thresholds as possible.</p><br>
        <p>The following parameters are available for optimization:</p>
        <ul>
            <li><strong>Precipitation</strong>: optimize for low precipitation. The threshold is in mm/h.</li>
            <li><strong>Headwind</strong>: optimize for low headwind. The threshold is in km/h.</li>
            <li><strong>Wind</strong>: optimize for low wind. The threshold is in km/h.</li>
            <li><strong>Hot temperature</strong>: avoid too high temperatures. The threshold is in ¬∞C.</li>
            <li><strong>Cold temperature</strong>: avoid too low temperature. The threshold is in ¬∞C.</li>
        </ul>
          <p>As an example, the score for the wind parameter is computed as follows:</p>
            $$
            windScore = \frac{1}{N} \sum_{n=0}^{N} \frac{wind_{n} - minWind}{maxWind - minWind}\;,
            $$
     <p>where \(wind_{n}\) is the wind speed of the n-th point of a route with \(N\) points in total, \(minWind\) is 0
         and \(maxWind\) is your chosen threshold. The other optimization scores are computed in a similar manner.</p><br>
      <p>The final score is then computed as:</p>
        $$ \begin{aligned}
        score = 100 - (\
           & weight_{precipitation} \cdot precipitationScore \\
           +\; &weight_{headWind} \cdot headwindScore \\
           +\; &weight_{wind} \cdot windScore \\
           +\; &weight_{hotTemperature} \cdot hotTemperatureScore \\
           +\; &weight_{coldTemperature} \cdot coldTemperatureScore),
        \end{aligned}
        \
        $$
      <p>where \(weight_{parameter}\) is the normalized weight given by the slider for each parameter.</p><br>
    <p>The maximum score is 100%, and it means that there is almost no wind and no precipitation,
    and the temperature lies in between your min and max acceptable thresholds. A score close to 0 features values
        that on average lie close to your maximum thresholds. Negative scores are possible and indicate that, on average,
        your route lies above your maximum thresholds. When one or more values in the route lie above your maximum
        thresholds, a warning sign will signal that if the route is anyway featured among the best five.</p>
      <h4 id="help-optimize-granularity">Granularity</h4>
      <p>Controls the granularity of the candidate routes to be searched; e.g., a granularity of 20 minutes means that the
      optimization functions will scan routes starting every 20 minutes.</p>
  </main>
<aside class="on-this-page">
  <h4>On this page</h4>
  <ul>
    <li><a href="#help-intro">How to Use the Tool</a>
      <ul>
        <li><a href="#help-inputs">Inputs</a>
          <ul>
            <li><a href="#help-gpx">GPX File</a></li>
            <li><a href="#help-provider">Weather Provider</a></li>
            <li><a href="#help-time">Start Time</a></li>
            <li><a href="#help-speed">Speed & Units</a></li>
            <li><a href="#help-adj">Uphill / Downhill Adjustments</a></li>
            <li><a href="#help-sample">Sampling</a></li>
            <li><a href="#help-calls">Max API calls</a></li>
            <li><a href="#help-breaks">Breaks</a></li>
            <li><a href="#help-stats">Stats</a></li>
          </ul>
        </li>
        <li><a href="#help-map">Map</a></li>
        <li><a href="#help-charts">Trip forecast</a>
          <ul>
            <li><a href="#help-temp-chart">Temperature chart</a></li>
            <li><a href="#help-precip-chart">Precipitation chart</a></li>
            <li><a href="#help-wind-chart">Wind chart</a></li>
          </ul>
        </li>
        <li><a href="#help-update-start-time">Update Start Time</a></li>
        <li><a href="#help-optimize">Optimize Start Time</a>
            <ul>
                <li><a href="#help-optimize-start-time">Allowed start time range</a></li>
                <li><a href="#help-optimize-weights">Optimization weights</a></li>
                <li><a href="#help-optimize-granularity">Granularity</a></li>
      </ul>
    </li>
  </ul>
     </ul>
</aside>
</div>
<footer style="text-align:center; margin-top:2em; padding:1em; font-size:0.8em; color:#help-808080; border-top:1px solid #help-595959;">
  ¬© 2025 Marti ‚Äî Licensed under the
  <a href="https://www.gnu.org/licenses/gpl-3.0.html" target="_blank" rel="noopener noreferrer" class="contact-link">
    GNU General Public License v3.0
  </a>
</footer>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>User Settings — GPX Route Weather</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="./css/style.css" />
</head>
<body data-sub="Customize your default settings" data-demo="false">
<header id="header"></header>
  <main class="wrap" style="display: flex; justify-content: center; align-items: flex-start; padding: 20px;">
    <div class="group" style="width: 100%; max-width: 600px;">
    <form id="settingsForm">
                <h3>Default Input Settings</h3>
      <div class="row">
          <div>
        <label for="def-provider">Weather Provider</label>
        <select id="def-provider">
          <option value="openmeteo">Open-Meteo</option>
          <option value="meteoblue">Meteoblue</option>
        </select>
              </div>
          <div>
        <label for="def-pictogramProvider">Pictogram Provider</label>
        <select id="def-pictogramProvider">
          <option value="yr">Yr</option>
          <option value="meteoblue">Meteoblue</option>
        </select>
              </div>
      </div>

      <div class="form-group">
        <label for="def-meteoblueKey">Meteoblue API Key</label>
        <input type="text" id="def-meteoblueKey" placeholder="Enter your API key" />
      </div>

      <div class="form-group">
        <label for="def-startTime">Default Start Time</label>
        <input type="time" id="def-startTime" value="07:00" />
      </div>
      <div class="row">
          <div>
      <div class="form-group">
        <label for="def-speed">Average speed (flat terrain)</label>
        <input type="number" id="def-speed" min="0" step="0.1" value="14" />
      </div>
              </div>
          <div>
      <div class="form-group">
        <label for="def-speedUnit">Unit</label>
        <select id="def-speedUnit">
          <option value="kmh" selected>km/h</option>
          <option value="mph">mph</option>
        </select>
      </div>
   </div>
      </div>

              <div class="row">
          <div>
      <div class="form-group">
        <label for="def-speedUp">Speed decrease uphill</label>
        <div class="input-with-suffix">
          <input type="number" id="def-speedUp" min="0" max="100" step="0.1" value="30" />
          <span class="suffix">%</span>
        </div>
      </div>
              </div>
          <div>
      <div class="form-group">
        <label for="def-speedDown">Speed increase downhill</label>
        <div class="input-with-suffix">
          <input type="number" id="def-speedDown" min="0" max="100" step="0.1" value="40" />
          <span class="suffix">%</span>
        </div>
      </div>
          </div>
      </div>

        <div class="row">
          <div>
      <div class="form-group">
        <label for="def-sampleMetersDense">Min sample spacing</label>
        <select id="def-sampleMetersDense">
          <option value="100">100 m</option>
          <option value="200" selected>200 m</option>
          <option value="500">500 m</option>
          <option value="1000">1 km</option>
        </select>
      </div>
              </div>
          <div>
      <div class="form-group">
        <label for="def-sampleMinutesDense">Min time spacing</label>
        <select id="def-sampleMinutesDense">
          <option value="1">1 min</option>
          <option value="2" selected>2 min</option>
          <option value="5">5 min</option>
          <option value="10">10 min</option>
        </select>
      </div>
                            </div>
          </div>

                                    <div class="row">
          <div>
      <div class="form-group">
        <label for="def-sampleMeters">Min sample spacing (icons)</label>
        <select id="def-sampleMeters">
          <option value="2000" selected>2 km</option>
          <option value="5000">5 km</option>
          <option value="10000">10 km</option>
        </select>
      </div>
              </div>
          <div>
      <div class="form-group">
        <label for="def-sampleMinutes">Min time spacing (icons)</label>
        <select id="def-sampleMinutes">
          <option value="15" selected>15 min</option>
          <option value="30">30 min</option>
          <option value="60">60 min</option>
        </select>
      </div>
                            </div>
          </div>

      <div class="form-group">
        <label for="def-maxCalls">Max API calls</label>
        <input type="number" id="def-maxCalls" min="5" max="200" value="60" />
      </div>

      <h3 style="margin-top: 2rem;">Default Optimization Settings</h3>
      <div class="time-row">
        <div>
          <label for="def-optStartTimeMin">Earliest time</label>
          <input type="time" id="def-optStartTimeMin" name="def-optStartTimeMin" value="07:00">
        </div>
        <div>
          <label for="def-optStartTimeMax">Latest time</label>
          <input type="time" id="def-optStartTimeMax" name="def-optStartTimeMax" value="09:00">
        </div>
      </div>
        <div class="sliders">
    <div class="grid">
      <div class="form-group">
        <label for="def-rainSlider">
          Precipitation weight
          <span id="def-rainSliderValue" class="slider-value">20%</span>
        </label>
          <input type="range" id="def-rainSlider" name="def-rainSlider" min="0" max="100" value="20" />
      </div>
      <div class="form-group">
        <label for="def-maxAcceptableRain">Max acceptable precipitation (mm/h)</label>
        <input type="number" id="def-maxAcceptableRain" min="0" max="50" step="0.1" value="0" />
      </div>

      <div class="form-group">
        <label for="def-windMaxSlider">
          Headwind weight
          <span id="def-windMaxSliderValue" class="slider-value">20%</span>
        </label>
          <input type="range" id="def-windMaxSlider" name="def-windMaxSlider" min="0" max="100" value="20" />
      </div>
      <div class="form-group">
        <label for="def-maxAcceptableWindMax">Max acceptable headwind (km/h)</label>
        <input type="number" id="def-maxAcceptableWindMax" min="0" max="100" value="10" />
      </div>

      <div class="form-group">
        <label for="def-windAvgSlider">
          Average wind weight
          <span id="def-windAvgSliderValue" class="slider-value">20%</span>
        </label>
          <input type="range" id="def-windAvgSlider" name="def-windAvgSlider" min="0" max="100" value="20" />
      </div>
      <div class="form-group">
        <label for="def-maxAcceptableWindAvg">Max acceptable average wind (km/h)</label>
        <input type="number" id="def-maxAcceptableWindAvg" min="0" max="200" value="15" />
      </div>

      <div class="form-group">
        <label for="def-tempSliderHot">
          Hot temperature weight
          <span id="def-tempSliderHotValue" class="slider-value">20%</span>
        </label>
          <input type="range" id="def-tempSliderHot" name="def-tempSliderHot" min="0" max="100" value="20" />
      </div>
      <div class="form-group">
        <label for="def-maxAcceptableTemp">Max acceptable hot temperature (°C)</label>
        <input type="number" id="def-maxAcceptableTemp" min="15" max="50" value="25" />
      </div>

      <div class="form-group">
        <label for="def-tempSliderCold">
          Cold temperature weight
          <span id="def-tempSliderColdValue" class="slider-value">20%</span>
        </label>
          <input type="range" id="def-tempSliderCold" name="def-tempSliderCold" min="0" max="100" value="20" />
      </div>
        <div class="form-group">
        <label for="def-minAcceptableTemp">Min acceptable cold temperature (°C)</label>
        <input type="number" id="def-minAcceptableTemp" min="-20" max="30" value="0" />
      </div>
</div>
            </div>

    <div class="form-group">
      <label for="def-granularityMinutes">Granularity</label>
      <select id="def-granularityMinutes">
        <option value="10">10 min</option>
        <option value="20" selected>20 min</option>
        <option value="30">30 min</option>
        <option value="60">60 min</option>
      </select>
    </div>

<div style="display: flex; justify-content: flex-end; margin-top: 20px;">
  <button id="saveSettingsBtn" style="width: auto;" onclick="saveUserSettings()">Save Settings</button>
    </div>
        <div class="settings-note" style="margin-top: 20px; color: var(--muted);">
          <p><strong>Note:</strong> These settings will be used as defaults when you load the main page. You can always override them there.</p>
          <p>Your settings are saved to the cloud using Firebase Firestore. Make sure you are signed in to save and load your preferences.</p>
</div>
      </form>
            </div>
  </main>
<div id="footer"></div>
<script src="./js/common.js"></script>
<!-- Goat Counter for logs and analytics -->
<script data-goatcounter="https://martina-cioffi.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
<!-- Firebase core + required services -->
<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore-compat.js"></script>
<!-- FirebaseUI for Web -->
<link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/6.1.0/firebase-ui-auth.css" />
<script src="https://www.gstatic.com/firebasejs/ui/6.1.0/firebase-ui-auth.js"></script>
<script src="./js/auth.js"></script>
<script type="module" src="./js/settings.js"></script>
<script>loadLayout();</script>
</body>
</html>